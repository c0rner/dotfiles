#!/bin/sh

loginuid() {
  local path="/proc/$1/loginuid"
  if [ -r "${path}" ]; then
    read < "${path}"
    echo "${REPLY}"
  fi
}

initid=$(loginuid 1)
uid=$(loginuid ${1:-$$})
if [ ${uid} -eq ${initid} ]; then
  echo "init"
else
  echo $(getent passwd ${uid}|sed 's/:.*//')
fi
